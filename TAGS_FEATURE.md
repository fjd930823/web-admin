# 板块标签二级联动功能说明

## 📋 功能概述
在发帖表单中添加了标签选择功能，标签根据所选板块动态显示，实现二级联动。

## 🎯 功能特点

### 1. 二级联动
- 选择板块后，标签选择器自动更新可选项
- 切换板块时，已选标签自动清空
- 未选择板块时，标签选择器禁用

### 2. 标签格式
- 标签显示格式：`分类: 标签名`（如：`类型: 古装`）
- 存储格式：逗号分隔的字符串（如：`类型:古装,画质:4K`）
- 支持多选和搜索过滤

### 3. 12个板块的标签配置

#### 资源互助
- 分类：求资源、求搬运、求帮助
- 状态：已解决、未解决
- 资源类别：电影、电视剧、动漫、综艺、原盘、音乐、其他

#### 反馈
- 分类：连接失效、网站问题、其他问题
- 状态：已解决、未解决

#### 电影
- 画质：480p、720p、1080p、2K、4K
- 类型：古装、家庭、恐怖、灾难、科幻、动画、纪录片、历史、剧情、惊悚、犯罪、冒险、奇幻、悬疑、爱情、战争、动作、喜剧、演唱会
- 地区：大陆、香港、台湾、韩国、日本、欧美、其他

#### 电视剧
- 分辨率：480p、720p、1080p、2K、4K
- 资源来源：蓝光原盘/ISO、蓝光原盘/REMUX、BDRip/BluRayEncode、WEB-DL/WEBRip、HDTV/HDRip
- 画质：杜比视界/DV、HDR、HQ、EDR、HLG、SDR、60fps
- 类型：古装、喜剧、动作、战争、爱情、悬疑、奇幻、冒险、犯罪、惊悚、剧情、历史、纪录片、动画
- 地区：大陆、香港、台湾、韩国、日本、欧美、其他
- 状态：完结、更新中

#### 动漫
- 分辨率：480p、720p、1080p、2K、4K、8K
- 来源：BDRip/BluRayEncode、蓝光原盘/REMUX、WEB-DL/WEBRip、超分/AI修复、蓝光原盘/ISO
- 类型：泡面、校园、悬疑、恋爱、魔法、冒险、历史、机战、百合、运动、励志、音乐、推理、催泪、治愈、萌系、耽美、原创、漫画改、小说改、游戏改、热血、穿越、奇幻、战斗、搞笑、日常、科幻、武侠、偶像
- 地区：中国、日本、美国、其他
- 状态：完结、更新中
- 字幕语言：简中、繁中、简日双语、繁日双语、简英双语、生肉
- 字幕种类：内封、外挂、内嵌

#### 综艺
- 分类：脱口秀、音乐舞台、相声小品、生活情感、真人秀、其他
- 地区：大陆、港台、韩国、日本、欧美、其他
- 状态：完结、更新中

#### 4K原盘
- 分类：4K电影、4K聚集、4K纪录片、4K演唱会、4K其他
- 格式：MKV、ISO、BDMV、M2TS、TS、MP4

#### 音频
- 分类：音乐、有声读物、有声小说、相声评书、广播剧、电台
- 地区：内地、港台、日本、韩国、其他、欧美
- 歌曲风格：R&B、Disco、雷鬼、民谣、乡村、古典、摇滚、流行、说唱、电子、ACG、爵士、朋克
- 有声类别：小说、娱乐、课程、影视、商业财经、个人成长、资讯、悬疑、人文文学、历史、经典名著
- 音频格式：WAV、MPEG、WAVE、CD、AMR、OGG、WMA、AAC、MP3、APE、ALAC、FLAC、SACD

#### 电子书
- 分类：网络文学、出版文学、名人传记、儿童读物、影视原著、人文社科、经管励志、轻小说、漫画、电子课程、其他
- 格式：TXT、EPUB、MOBI、PDF、AZW3、其他
- 地区：大陆、港台、日韩、欧美、其他

#### 设计专区
- 分类：AI合成、私模写真、名站秀人、高清壁纸、其他、设计教程

#### 工具
- 工具：电脑、手机、其他

#### 体育专区
- 其他：排球、网球、乒乓球、其他运动
- 篮球：NBA、国际篮球、国内篮球、篮球节目
- 足球：苏超、英超、德甲、欧冠、世界杯、西甲、意甲、足球节目

## 💾 数据库变更
- 新增字段：`posts.tags` (TEXT, 可为空)
- 存储格式：逗号分隔的字符串

## 🖥️ 前端变更
1. **发帖表单 (Create/index.tsx)**
   - 新增标签多选框
   - 实现板块-标签联动逻辑
   - 支持搜索过滤标签

2. **发帖历史 (History/index.tsx)**
   - 新增标签列显示
   - 标签以Tag形式展示（最多显示3个+更多）

3. **API接口 (services/api.ts)**
   - `Post`接口新增`tags`字段
   - `submitPost`函数支持tags参数

## 🔧 后端变更
1. **DTO (create-post.dto.ts)**
   - 新增`tags`字段验证（可选）

2. **Service (posts.service.ts)**
   - `Post`接口新增`tags`字段

## 📝 使用方法
1. 选择板块
2. 根据需要选择一个或多个标签（可选）
3. 填写其他必填项
4. 提交表单

## 🎨 UI展示
- 标签选择器：支持多选、搜索、响应式标签数量显示
- 历史记录：以彩色Tag显示，超过3个显示"+N"
- 提示信息：未选择板块时提示"请先选择板块"

---
更新时间：2026-01-12
